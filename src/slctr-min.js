/*
 Slctr v.0.3 | github.com/lukasborawski/slctr
 */
var $selectCoordsDt;(function(e,t,n){function o(t){this.settings=e.extend({},s,t);this.init()}var r,i="slctr",s={slctrBox:"#slctrBox",insdElmnts:"img",globalWidth:"undefined",cursorDistance:2};e.fn.doesExist=function(){return this.length>0};var u=function(e,t){var r=n.createElement(e);for(var i in t){r[i]=t[i]}return r};o.prototype={init:function(){var t=e(this.settings.slctrBox);t.doesExist()?r=true:r=console.log("App failed");if(r){var i=t.find(">"+this.settings.insdElmnts),s=u("div",{className:"selectArea"}),o,a,f=400,l=this;var c=0,h=t.find(">"+this.settings.insdElmnts).length;i.data("data","insideObject");i.data("insideObject",i.data("insideObject")).load(function(){function e(){t.width(n).css("visibility","visible");i.wrapAll(s)}c++;if(c>=h){if(l.settings.globalWidth==="undefined"){var n=i.first().width();e()}else{t.width(l.settings.globalWidth);e()}}});function p(e,t){d=false;v=0;m=0;o.remove();if(e){t.off("mousemove");t.off("mousedown")}}var d,v,m=false;e(n.body).on("mousedown",".selectArea",function(r){r.preventDefault();d=true;a=e("#selectCoords");if(a.doesExist()){a.remove()}var i=u("input",{type:"hidden",id:"selectCoords"});e(n.body).append(i).one();var s=u("div",{className:"selectMark"});t.append(s);o=e(".selectMark");var c=0,h=0;var g=e(this).offset();var y={};e(this).on("mousemove",function(t){if(typeof y.x!="undefined"){var n=y.x-event.clientX,r=y.y-event.clientY;if(Math.abs(n)>Math.abs(r)&&n<0||Math.abs(r)>Math.abs(n)&&r<0){var i=t.pageX-g.left,s=t.pageY-g.top;o.css({left:i-l.settings.cursorDistance,top:s-l.settings.cursorDistance});e(this).unbind("mousemove").on("mousemove",function(e){if(d){m&&(h+=e.pageY-m);v&&(c+=e.pageX-v);v=e.pageX;m=e.pageY;o.css({width:c,height:h})}})}else if(Math.abs(n)>Math.abs(r)&&n>0||Math.abs(r)>Math.abs(n)&&r>0){e(this).unbind("mousemove").on("mousemove",function(e){var t=e.pageX-g.left,n=e.pageY-g.top;m&&(h+=e.pageY-m);v&&(c+=e.pageX-v);v=e.pageX;m=e.pageY;o.css({width:-c,height:-h,top:n+l.settings.cursorDistance,left:t+l.settings.cursorDistance})})}}y={x:event.clientX,y:event.clientY}});e(this).unbind("mouseup").on("mouseup",function(){p(true,e(".selectArea"));var t=r.pageX-g.left,n=r.pageY-g.top;a=e("#selectCoords");c<0?a.data({x:t+c,y:n+h,w:-c,h:-h}):a.data({x:t,y:n,w:c,h:h});$selectCoordsDt=a.data();if(typeof l.settings.callback==="function"){l.settings.callback($selectCoordsDt)}});setTimeout(function(){o.on("mouseenter",function(){p()})},f)})}}};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(t))}})}})(jQuery,window,document)